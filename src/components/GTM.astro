---
interface Props {
  id: string;
}

const { id } = Astro.props;

const gtagUrl = `https://www.googletagmanager.com/gtag/js?id=${id}`;
---
<script is:inline>
window.dataLayer=window.dataLayer||[];
function gtag(){dataLayer.push(arguments);}
</script>
<script is:inline type="text/partytown" src={gtagUrl}></script>
<script is:inline type="text/partytown" define:vars={{id}}>
document.addEventListener('astro:page-load', () => {
	gtag('js', new Date());
	// Implement default denied consents and ONLY collect anonymous data.
	gtag('consent', 'default', {
		ad_storage: 'denied',
		ad_user_data: 'denied',
		ad_personalization: 'denied',
		analytics_storage: 'denied',
	});
	gtag('config', id);
}, { once: false });
</script>