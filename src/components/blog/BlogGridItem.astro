---
import { Calendar, Clock } from 'lucide-preact';
import type { PostEntry } from '~/types/Post';
import { formatShortDate } from '~/utils/date';

interface Props {
  post: PostEntry;
}

const { post } = Astro.props;
const { id, slug } = post;
const { title, description, date, tags, image } = post.data;
const { remarkPluginFrontmatter } = await post.render();
const { readingTime } = remarkPluginFrontmatter;
---

<div class="rounded-2xl overflow-hidden border border-soft shadow grid [grid-template-columns:auto_1fr] gap-4">
  <div class="p-4">
    <h3 class="text-base m-0" transition:name={`t-${id}`}><a href={`/blog/${slug}/`}>{title}</a></h3>
    <p class="mt-1 line-clamp-1" transition:name={`d-${id}`}>{description}</p>
    <div class="flex flex-wrap gap-4 text-muted text-sm mt-2" transition:name={`m-${id}`}>
      <time class="flex items-center" title="Fecha de publicaciÃ³n" datetime={date.toISOString()}><Calendar class="size-4 mr-2"/>{formatShortDate(date)}</time>
      <span class="flex items-center" title="Tiempo de lectura"><Clock class="size-4 mr-2"/>{readingTime}</span>
    </div>
  </div>
  {image && (
    <a href={`/blog/${slug}/`} class="w-28 md:w-56 h-full"><img alt={image.alt} class="size-full object-cover" src={image.src} loading="lazy" transition:name={`i-${id}`} /></a>
  )}
</div>